(()=>{var e={224:function(e,t,r){e=r.nmd(e),function(r){"use strict";var n={};r.PubSub?(n=r.PubSub,console.warn("PubSub already loaded, using existing version")):(r.PubSub=n,function(e){var t={},r=-1,n="*";function o(e,t,r){try{e(t,r)}catch(e){setTimeout(function(e){return function(){throw e}}(e),0)}}function a(e,t,r){e(t,r)}function i(e,r,n,i){var s,l=t[r],d=i?a:o;if(Object.prototype.hasOwnProperty.call(t,r))for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&d(l[s],e,n)}function s(e){var r=String(e);return Boolean(Object.prototype.hasOwnProperty.call(t,r)&&function(e){var t;for(t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!0;return!1}(t[r]))}function l(e,t,r,o){var a=function(e,t,r){return function(){var o=String(e),a=o.lastIndexOf(".");for(i(e,e,t,r);-1!==a;)a=(o=o.substr(0,a)).lastIndexOf("."),i(e,o,t,r);i(e,n,t,r)}}(e="symbol"==typeof e?e.toString():e,t,o);return!!function(e){for(var t=String(e),r=s(t)||s(n),o=t.lastIndexOf(".");!r&&-1!==o;)o=(t=t.substr(0,o)).lastIndexOf("."),r=s(t);return r}(e)&&(!0===r?a():setTimeout(a,0),!0)}e.publish=function(t,r){return l(t,r,!1,e.immediateExceptions)},e.publishSync=function(t,r){return l(t,r,!0,e.immediateExceptions)},e.subscribe=function(e,n){if("function"!=typeof n)return!1;e="symbol"==typeof e?e.toString():e,Object.prototype.hasOwnProperty.call(t,e)||(t[e]={});var o="uid_"+String(++r);return t[e][o]=n,o},e.subscribeAll=function(t){return e.subscribe(n,t)},e.subscribeOnce=function(t,r){var n=e.subscribe(t,(function(){e.unsubscribe(n),r.apply(this,arguments)}));return e},e.clearAllSubscriptions=function(){t={}},e.clearSubscriptions=function(e){var r;for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&0===r.indexOf(e)&&delete t[r]},e.countSubscriptions=function(e){var r,n,o=0;for(r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&0===r.indexOf(e)){for(n in t[r])o++;break}return o},e.getSubscriptions=function(e){var r,n=[];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&0===r.indexOf(e)&&n.push(r);return n},e.unsubscribe=function(r){var n,o,a,i="string"==typeof r&&(Object.prototype.hasOwnProperty.call(t,r)||function(e){var r;for(r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&0===r.indexOf(e))return!0;return!1}(r)),s=!i&&"string"==typeof r,l="function"==typeof r,d=!1;if(!i){for(n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(o=t[n],s&&o[r]){delete o[r],d=r;break}if(l)for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&o[a]===r&&(delete o[a],d=!0)}return d}e.clearSubscriptions(r)}}(n)),void 0!==e&&e.exports&&(t=e.exports=n),t.PubSub=n,e.exports=t=n}("object"==typeof window&&window||this)}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.loaded=!0,a.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{"use strict";var e=r(224),t=r.n(e);let n=new class{fillBoard(e,t){let r=document.querySelector(".play-area");document.querySelector(".menu").classList.add("hidden"),r.classList.remove("transparent");for(let e=9;e>=0;e--)for(let r=0;r<10;r++)document.querySelector(`.play-area div[data-x="${r}"][data-y="${e}"]`).innerText=t[e][r]}board(){let e=document.querySelector(".play-area");e.innerHTML="";for(let t=9;t>=0;t--)for(let r=0;r<10;r++){let n=document.createElement("div");n.setAttribute("data-x",r),n.setAttribute("data-y",t),e.append(n)}}loading(){let e=document.querySelector(".menu");e.innerHTML="";let t=document.createElement("p");t.innerText="loading",t.classList.add("loading"),e.append(t)}listOfWords(e,t){let r=document.querySelector(".list-words");r.innerHTML="";for(let e of t){let t=document.createElement("li");t.innerText=e,t.setAttribute("data-word",e),r.append(t)}}win(e,[t,r]){let n=document.querySelector(".menu");document.querySelector(".play-area").classList.add("transparent"),n.classList.remove("hidden");let o=document.createElement("h2"),a=document.createElement("p"),i=document.createElement("button");a.classList.add("bestRecord"),a.innerText="Best Record: "+t+"s",o.innerText=r+"s",o.classList.add("final-time"),i.innerText="Play Again",i.classList.add("playAgainBtn"),n.innerHTML="",n.append(o),n.append(a),n.append(i)}};async function o(e=[]){if(8===e.length)return e;var t,r;return(r=e,t=(t=await async function(){let e=await fetch("https://random-word-api.vercel.app/api?words=30&alphabetize=true");return await e.json()}()).filter((e=>e.length<7)),t=new Set([...r,...t]),e=Array.from(t)).length>8&&e.splice(8,e.length-8),o(e)}let a=new class{constructor(e){this.words=e,this.board=this.generateBoard(),this.numOfFoundWord=0,this.foundWords=[],this.bestRecord=0,this.score=0,this.id}init(){this.getFromLocalStorage(),t().publish("Loading"),o().then((e=>{this.words=e,this.initBoard()||(t().publish("RenderGame",this.board),t().publish("RenderList",this.words),this.stopwatch())}))}initBoard(){let e=0;for(let t of this.words){let r=["vertical","diagonal","horizontal"],n=this.placeWord(t,r[e++]);if(n)return n;e>3&&(e=0)}this.fillBoard()}getFromLocalStorage(){let e=localStorage.getItem("record");null!==e&&("null"!==e?this.bestRecord=e:localStorage.removeItem("record"))}setLocalStorage(){localStorage.setItem("record",this.bestRecord)}availableCoordinate=this.generateAvailableCoordinate();stopwatch(){t().publish("UpdateSecond",this.score),this.id=setInterval((()=>{this.score++,t().publish("UpdateSecond",this.score)}),1e3)}generateBoard(){let e=[];for(let t=0;t<10;t++){let r=[];for(let e=0;e<10;e++)r[e]=null;e[t]=r}return e}generateAvailableCoordinate(){let e=[];for(let t=0;t<10;t++)for(let r=0;r<10;r++){let n=[r,t];e.push(n)}return e}#e(){return Math.floor(9*Math.random())}getCoordinate(e,t){let r=0;e:for(;;){if(r>500)return this.reset(),this.init(),["","","",!0];r++;let n=this.#e(),o=this.#e();if(null===this.board[o][n]){for(let r=0;r<e.length;r++){let e=r+n;if("diagonal"!==t){if("vertical"!==t){if(null!==this.board[o][e]){t="diagonal";continue e}}else if(e=o-r,e<0||null!==this.board[e][n]){t="horizontal";continue e}}else{let n=o-r;if(n<0||null!==this.board[n][e]){t="vertical";continue e}}}return[n,o,t,!1]}}}placeWord(e,t){let[r,n,o,a]=this.getCoordinate(e,t);if(a)return a;t=o;for(let o of e)"diagonal"!==t?"vertical"!==t?this.board[n][r++]=o:this.board[n--][r]=o:this.board[n--][r++]=o}fillBoard(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");for(let t of this.board)for(let r in t){let n=Math.floor(25*Math.random());null===t[r]&&(t[r]=e[n])}}checkWord(e,{word:r,initial:n,final:o,orientation:a}){r=r.toLowerCase();let i=this.words.indexOf(r);if(-1===i)return!1;let s=this.words.splice(i,1);return this.foundWords.push(s),this.checkWin(),t().publish("FoundWord",[n,o,a,r]),!0}checkWin(){return 0===this.words.length&&(clearInterval(this.id),this.updateRecord(),t().publish("RenderWin",[this.bestRecord,this.score]),!0)}updateRecord(){(0===this.bestRecord||this.score<this.bestRecord)&&(this.bestRecord=this.score),this.setLocalStorage()}reset(){this.board=this.generateBoard(),this.foundWords=[],this.score=0}};t().subscribe("RenderGame",n.fillBoard),t().subscribe("RenderGame",(function(){let e=document.querySelectorAll(".play-area div.found");null!==e&&e.forEach((e=>e.className=""))})),t().subscribe("RenderBoard",n.board),t().subscribe("RenderList",n.listOfWords),t().subscribe("Loading",n.loading),t().subscribe("RenderWin",n.win),t().subscribe("FoundWord",(function(e,[t,r,n]){let o,a,i=+t.y,s=+t.x,l=+r.x;"vertical"===n&&(i=+t.x,s=+t.y,l=+r.y),"diagonal"===n&&(o=+t.y,a=+r.y);let d="",c=!0,u=0,f=["green","blue","orange"],p=Math.floor(3*Math.random());for(;c&&u<=100;){u++,s===l&&(c=!1);let e=document.querySelector(`.board div[data-x="${s}"][data-y="${i}"]`);switch(n){case"vertical":e=document.querySelector(`div[data-x="${i}"][data-y="${s}"]`);break;case"diagonal":e=document.querySelector(`.board div[data-x="${s}"][data-y="${o}"]`),o<a&&o++,o>a&&o--}e.classList.add("found"),e.classList.add(f[p]),d+=e.innerText,s<l&&s++,s>l&&s--}return d})),t().subscribe("FoundWord",(function(e,[,,,t]){document.querySelector(`li[data-word="${t}"]`).classList.add("found-list")})),t().subscribe("UpdateSecond",(function(e,t){document.querySelector(".second-indicator").innerText=t+"s"})),document.querySelector(".startBtn").addEventListener("click",(()=>{t().publish("StartGame")})),t().subscribe("RenderWin",(function(){document.querySelector(".playAgainBtn").addEventListener("click",(()=>{t().publish("ResetGame"),t().publish("StartGame")}))})),function(){let e=document.querySelector(".play-area");e.addEventListener("pointerdown",(r=>{r.preventDefault(),r.target.releasePointerCapture(r.pointerId);let n=r.target,o=r.target;n.classList.add("selected");let a="";function i(e){e.preventDefault(),o=e.target;let r="";o.dataset.x===n.dataset.x&&(s(),r="vertical"),o.dataset.y===n.dataset.y&&(s(),r="horizontal"),Math.abs(o.dataset.y-n.dataset.y)===Math.abs(o.dataset.x-n.dataset.x)&&(s(),r="diagonal"),a=function(e,t,r){if(""===r)return"";let n,o,a=+e.y,i=+e.x,s=+t.x;"vertical"===r&&(a=+e.x,i=+e.y,s=+t.y),"diagonal"===r&&(n=+e.y,o=+t.y);let l="",d=!0,c=0;for(;d&&c<=100;){c++,i===s&&(d=!1);let e=document.querySelector(`.board div[data-x="${i}"][data-y="${a}"]`);"vertical"===r&&(e=document.querySelector(`.board div[data-x="${a}"][data-y="${i}"]`)),"diagonal"===r&&(e=document.querySelector(`.board div[data-x="${i}"][data-y="${n}"]`),n<o&&n++,n>o&&n--),e.classList.add("selected"),l+=e.innerText,i<s&&i++,i>s&&i--}return l}(n.dataset,o.dataset,r),t().publish("SendAnswer",{word:a,initial:n.dataset,final:o.dataset,orientation:r})}function s(){document.querySelectorAll(".selected").forEach((e=>{e.classList.remove("selected")}))}e.addEventListener("pointerover",i),document.addEventListener("pointerup",(function(){e.removeEventListener("pointerover",i),s()}),{once:!0})}))}(),t().subscribe("SendAnswer",a.checkWord.bind(a)),t().subscribe("StartGame",a.init.bind(a)),t().subscribe("ResetGame",a.reset.bind(a)),window.addEventListener("load",(()=>{t().publish("RenderBoard")}))})()})();