(()=>{var e={224:function(e,t,r){e=r.nmd(e),function(r){"use strict";var o={};r.PubSub?(o=r.PubSub,console.warn("PubSub already loaded, using existing version")):(r.PubSub=o,function(e){var t={},r=-1,o="*";function n(e,t,r){try{e(t,r)}catch(e){setTimeout(function(e){return function(){throw e}}(e),0)}}function a(e,t,r){e(t,r)}function i(e,r,o,i){var s,l=t[r],d=i?a:n;if(Object.prototype.hasOwnProperty.call(t,r))for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&d(l[s],e,o)}function s(e){var r=String(e);return Boolean(Object.prototype.hasOwnProperty.call(t,r)&&function(e){var t;for(t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!0;return!1}(t[r]))}function l(e,t,r,n){var a=function(e,t,r){return function(){var n=String(e),a=n.lastIndexOf(".");for(i(e,e,t,r);-1!==a;)a=(n=n.substr(0,a)).lastIndexOf("."),i(e,n,t,r);i(e,o,t,r)}}(e="symbol"==typeof e?e.toString():e,t,n);return!!function(e){for(var t=String(e),r=s(t)||s(o),n=t.lastIndexOf(".");!r&&-1!==n;)n=(t=t.substr(0,n)).lastIndexOf("."),r=s(t);return r}(e)&&(!0===r?a():setTimeout(a,0),!0)}e.publish=function(t,r){return l(t,r,!1,e.immediateExceptions)},e.publishSync=function(t,r){return l(t,r,!0,e.immediateExceptions)},e.subscribe=function(e,o){if("function"!=typeof o)return!1;e="symbol"==typeof e?e.toString():e,Object.prototype.hasOwnProperty.call(t,e)||(t[e]={});var n="uid_"+String(++r);return t[e][n]=o,n},e.subscribeAll=function(t){return e.subscribe(o,t)},e.subscribeOnce=function(t,r){var o=e.subscribe(t,(function(){e.unsubscribe(o),r.apply(this,arguments)}));return e},e.clearAllSubscriptions=function(){t={}},e.clearSubscriptions=function(e){var r;for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&0===r.indexOf(e)&&delete t[r]},e.countSubscriptions=function(e){var r,o,n=0;for(r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&0===r.indexOf(e)){for(o in t[r])n++;break}return n},e.getSubscriptions=function(e){var r,o=[];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&0===r.indexOf(e)&&o.push(r);return o},e.unsubscribe=function(r){var o,n,a,i="string"==typeof r&&(Object.prototype.hasOwnProperty.call(t,r)||function(e){var r;for(r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&0===r.indexOf(e))return!0;return!1}(r)),s=!i&&"string"==typeof r,l="function"==typeof r,d=!1;if(!i){for(o in t)if(Object.prototype.hasOwnProperty.call(t,o)){if(n=t[o],s&&n[r]){delete n[r],d=r;break}if(l)for(a in n)Object.prototype.hasOwnProperty.call(n,a)&&n[a]===r&&(delete n[a],d=!0)}return d}e.clearSubscriptions(r)}}(o)),void 0!==e&&e.exports&&(t=e.exports=o),t.PubSub=o,e.exports=t=o}("object"==typeof window&&window||this)}},t={};function r(o){var n=t[o];if(void 0!==n)return n.exports;var a=t[o]={id:o,loaded:!1,exports:{}};return e[o].call(a.exports,a,a.exports,r),a.loaded=!0,a.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{"use strict";var e=r(224),t=r.n(e);let o=new class{fillBoard(e,t){let r=document.querySelector(".play-area");document.querySelector(".menu").classList.add("hidden"),r.classList.remove("transparent");for(let e=9;e>=0;e--)for(let r=0;r<10;r++)document.querySelector(`.play-area div[data-x="${r}"][data-y="${e}"]`).innerText=t[e][r]}board(){let e=document.querySelector(".play-area");e.innerHTML="";for(let t=9;t>=0;t--)for(let r=0;r<10;r++){let o=document.createElement("div");o.setAttribute("data-x",r),o.setAttribute("data-y",t),e.append(o)}}loading(){let e=document.querySelector(".menu");e.innerHTML="";let t=document.createElement("p");t.innerText="loading",t.classList.add("loading"),e.append(t)}listOfWords(e,t){let r=document.querySelector(".list-words");r.innerHTML="";for(let e of t){let t=document.createElement("li");t.innerText=e,t.setAttribute("data-word",e),r.append(t)}}win(e,[t,r]){let o=document.querySelector(".menu");document.querySelector(".play-area").classList.add("transparent"),o.classList.remove("hidden");let n=document.createElement("h2"),a=document.createElement("p"),i=document.createElement("button");a.classList.add("bestRecord"),a.innerText="Best Record: "+t+"s",n.innerText=r+"s",n.classList.add("final-time"),i.innerText="Play Again",i.classList.add("playAgainBtn"),o.innerHTML="",o.append(n),o.append(a),o.append(i)}};async function n(e=[]){if(8===e.length)return e;var t,r;return(r=e,t=(t=await async function(){let e=await fetch("https://random-word-api.vercel.app/api?words=30&alphabetize=true"),t=await e.json();return console.log("call"),t}()).filter((e=>e.length<7)),t=new Set([...r,...t]),t=Array.from(t),console.log(t),e=t).length>8&&e.splice(8,e.length-8),n(e)}let a=new class{constructor(e){this.words=e,this.board=this.generateBoard(),this.numOfFoundWord=0,this.foundWords=[],this.bestRecord=0,this.score=0,this.id}init(){this.getFromLocalStorage(),t().publish("Loading"),n().then((e=>{this.words=e,this.initBoard(),t().publish("RenderGame",this.board),t().publish("RenderList",this.words),this.stopwatch()}))}initBoard(){let e=0;for(let t of this.words){let r=["vertical","diagonal","horizontal"];this.placeWord(t,r[e++]),e>3&&(e=0)}this.fillBoard()}getFromLocalStorage(){console.log(localStorage.length),0!==localStorage.length&&(this.bestRecord=localStorage.getItem("record"))}setLocalStorage(){localStorage.setItem("record",this.bestRecord)}availableCoordinate=this.generateAvailableCoordinate();stopwatch(){t().publish("UpdateSecond",this.score),this.id=setInterval((()=>{this.score++,t().publish("UpdateSecond",this.score)}),1e3)}generateBoard(){let e=[];for(let t=0;t<10;t++){let r=[];for(let e=0;e<10;e++)r[e]=null;e[t]=r}return e}generateAvailableCoordinate(){let e=[];for(let t=0;t<10;t++)for(let r=0;r<10;r++){let o=[r,t];e.push(o)}return e}#e(){return Math.floor(9*Math.random())}getCoordinate(e,t){let r=0;e:for(;;){if(r>500)throw new RangeError("Looping too much, please tell the dev");r++;let o=this.#e(),n=this.#e();if(null===this.board[n][o]){for(let r=0;r<e.length;r++){let e=r+o;if("diagonal"!==t){if("vertical"!==t){if(null!==this.board[n][e]){t="diagonal";continue e}}else if(e=n-r,e<0||null!==this.board[e][o]){t="horizontal";continue e}}else{let o=n-r;if(o<0||null!==this.board[o][e]){t="vertical";continue e}}}return[o,n,t]}}}placeWord(e,t){let[r,o,n]=this.getCoordinate(e,t);t=n;for(let n of e)"diagonal"!==t?"vertical"!==t?this.board[o][r++]=n:this.board[o--][r]=n:this.board[o--][r++]=n}fillBoard(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");for(let t of this.board)for(let r in t){let o=Math.floor(25*Math.random());null===t[r]&&(t[r]=e[o])}}checkWord(e,{word:r,initial:o,final:n,orientation:a}){r=r.toLowerCase();let i=this.words.indexOf(r);if(-1===i)return!1;let s=this.words.splice(i,1);return this.foundWords.push(s),console.log("Found"),this.checkWin(),console.log(o),t().publish("FoundWord",[o,n,a,r]),!0}checkWin(){return 0===this.words.length&&(clearInterval(this.id),this.updateRecord(),t().publish("RenderWin",[this.bestRecord,this.score]),console.log(this.bestRecord),!0)}updateRecord(){(0===this.bestRecord||this.score<this.bestRecord)&&(this.bestRecord=this.score),this.setLocalStorage()}reset(){this.board=this.generateBoard(),this.foundWords=[],this.score=0}};t().subscribe("RenderGame",o.fillBoard),t().subscribe("RenderGame",(function(){let e=document.querySelectorAll(".play-area div.found");null!==e&&e.forEach((e=>e.className=""))})),t().subscribe("RenderBoard",o.board),t().subscribe("RenderList",o.listOfWords),t().subscribe("Loading",o.loading),t().subscribe("RenderWin",o.win),t().subscribe("FoundWord",(function(e,[t,r,o]){console.log(t),console.log(o);let n,a,i=+t.y,s=+t.x,l=+r.x;"vertical"===o&&(i=+t.x,s=+t.y,l=+r.y),"diagonal"===o&&(n=+t.y,a=+r.y);let d="",c=!0,u=0,f=["green","blue","orange"],p=Math.floor(3*Math.random());for(;c&&u<=100;){u++,s===l&&(c=!1);let e=document.querySelector(`.board div[data-x="${s}"][data-y="${i}"]`);switch(o){case"vertical":e=document.querySelector(`div[data-x="${i}"][data-y="${s}"]`);break;case"diagonal":e=document.querySelector(`.board div[data-x="${s}"][data-y="${n}"]`),n<a&&n++,n>a&&n--}e.classList.add("found"),e.classList.add(f[p]),d+=e.innerText,s<l&&s++,s>l&&s--}return d})),t().subscribe("FoundWord",(function(e,[,,,t]){document.querySelector(`li[data-word="${t}"]`).classList.add("found-list")})),t().subscribe("UpdateSecond",(function(e,t){document.querySelector(".second-indicator").innerText=t+"s"})),document.querySelector(".startBtn").addEventListener("click",(()=>{t().publish("StartGame")})),t().subscribe("RenderWin",(function(){document.querySelector(".playAgainBtn").addEventListener("click",(()=>{t().publish("ResetGame"),t().publish("StartGame")}))})),function(){let e=document.querySelector(".play-area");e.addEventListener("pointerdown",(r=>{r.preventDefault(),r.target.releasePointerCapture(r.pointerId);let o=r.target,n=r.target;o.classList.add("selected");let a="";function i(e){e.preventDefault(),n=e.target;let r="";n.dataset.x===o.dataset.x&&(s(),r="vertical"),n.dataset.y===o.dataset.y&&(s(),r="horizontal"),Math.abs(n.dataset.y-o.dataset.y)===Math.abs(n.dataset.x-o.dataset.x)&&(s(),r="diagonal"),console.log(r),a=function(e,t,r){if(""===r)return"";let o,n,a=+e.y,i=+e.x,s=+t.x;"vertical"===r&&(a=+e.x,i=+e.y,s=+t.y),"diagonal"===r&&(o=+e.y,n=+t.y);let l="",d=!0,c=0;for(;d&&c<=100;){c++,i===s&&(d=!1);let e=document.querySelector(`.board div[data-x="${i}"][data-y="${a}"]`);"vertical"===r&&(e=document.querySelector(`.board div[data-x="${a}"][data-y="${i}"]`)),"diagonal"===r&&(e=document.querySelector(`.board div[data-x="${i}"][data-y="${o}"]`),o<n&&o++,o>n&&o--),e.classList.add("selected"),l+=e.innerText,i<s&&i++,i>s&&i--}return l}(o.dataset,n.dataset,r),t().publish("SendAnswer",{word:a,initial:o.dataset,final:n.dataset,orientation:r})}function s(){document.querySelectorAll(".selected").forEach((e=>{e.classList.remove("selected")}))}e.addEventListener("pointerover",i),document.addEventListener("pointerup",(function(){e.removeEventListener("pointerover",i),s(),console.log(a),console.log(o),console.log(n)}),{once:!0})}))}(),t().subscribe("SendAnswer",a.checkWord.bind(a)),t().subscribe("StartGame",a.init.bind(a)),t().subscribe("ResetGame",a.reset.bind(a)),window.addEventListener("load",(()=>{t().publish("RenderBoard")}))})()})();